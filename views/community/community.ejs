<%- include("../templates/header") %>
<link rel="stylesheet" href="/community/community.css" />
</head>

<body>
  <!-- NAVBAR TOP -->
  <%- include("../templates/top-navbar") %>
  <%- include("../templates/hamburger") %>

  <h2 class="choose-garden">Choose a garden</h2>

  <div id="gardens">

    <% for(let i=0; i < gardens.length; i++) { %>
    <div style="background-image: url('/img/garden.jpeg')" class="gardenGroup">
      
      <a href="/community/<%= gardens[i].gardenRef %>">
        <div class="garden-inner"><%= gardens[i].gardenName %></div>
      </a>

    </div>
    <% } %>
  </div>

  <h2>Posts from <%= gardenP %></h2>
  <div id="posts">
    <!-- BOOTSTRAP USED FOR POSTS -->
    <% for(let i = result.length - 1; i >= 0; i--) { %>
    <div class="container">
      <div class="username-container">
        <span><b class="username"><%= username[i] %></b></span>
      </div>
      <img class="post-img" src="data:image/jpeg;base64,<%= posts[i] %>" height="300" width="300" alt="my Image">
      <div class="post-actions">




          <% if (userLikes[i].includes(currentUser)) { %>
            <form action="/community/unfavPost" method="post" style="display: inline;">
              <input type="hidden" name="postID" value="<%= postID[i] %>">
              <input type="hidden" name="garden" value="<%= postLikeRef %>">
              <button type="submit" value="" name="likes" class="material-icons-round favorite-button">favorite
              </button>
            </form>
        
            <% } else { %>
              <form action="/community/favPost" method="post">
                <input type="hidden" name="postID" value="<%= postID[i] %>">
                <input type="hidden" name="garden" value="<%= postLikeRef %>">
                <button class="material-icons-round">
                  favorite_border
                </button></form>
            <% } %>





        
        <span class="material-icons-round">
          chat_bubble_outline
        </span>
        
      </div>
      <div class="description">
        <aside class="likes"><small></small><small>&nbsp;<%= userLikes[i].length %> Likes</small></aside>
        <span><b class="username"><%= username[i] %>&nbsp;</b></span>
        <span id="description"><%= desc[i] %></span>
        <aside class="comments"><small>view all comments</small></aside>
        <aside class="date"><small><%= date[i] %></small></aside>
      </div>
    </div>
    <% } %>
  </div>



  <!-- NAVBAR BOTTOM -->
  <%- include("../templates/bottom-navbar") %>

  <!-- SCRIPTS -->
  <script type="module" src="/modules/navigations.js"></script>
  <script type="module" src="/views/universal.js"></script>
  <script type="module" src="community.js"></script>
  <%- include("../templates/footer") %>